<varmap assembly="..\Scx.Test.Apache.SDK.ApacheSDKTests.dll" contact="a-brdust" dsc="Apache SDK-based BVT" owner="v-jeyin" xmlns="http://smxinfranet/schemas/mcf/2002/01/varmap">
  <!--Tasks-->
  <var set="0" lvl="0" vid="724163" cid="DeployModuleTask" cls="Scx.Test.Apache.SDK.ApacheSDKTests.DeployModuleTask" dsc="Verify if install Apache CIM Module works by running task Install/Upgrade Apache CIM Module with valid root account." permutation="rows">
    <recm key="EntityName">
      <val>Install/Upgrade Apache CIM Module with valid root account</val>
    </recm>
    <recm key="TaskName">
      <val>Microsoft.ApacheHTTPServer.DeployModule.Task</val>
    </recm>
    <recm key="InstanceClass">
      <val>Microsoft.ApacheHTTPServer.Installation</val>
    </recm>
    <recm key="ExpectedTaskStatus">
      <val>Success</val>
    </recm>
    <recm key="expectedOutputKeyWord">
      <val>OK</val>
    </recm>
  </var>
  <!-- Performance Health -->
  <var set="0" lvl="0" vid="725209" cid="ApacheHTTPServerPerformanceHealth" cls="Scx.Test.Apache.SDK.ApacheSDKTests.PerformanceHealth" dsc="This test will test ApacheHTTPServer performance health 725208,725209" permutation="rows">
    <recm key="entityname">
      <val>ApacheHTTPServerTotalPctCPU</val>
      <val>ApacheHTTPServerTotalPctBusyWorkers</val>
    </recm>
    <recm key="action">
      <val>ab -n 50000 http://localhost/</val>
      <val>ab -n 50000 -c 100 http://localhost/</val>
    </recm>
    <!-- Name of the monitor that will have its state changed due to the action taken -->
    <recm key="monitorname">
      <val>Microsoft.ApacheHTTPServer.ManagedServer.Unix.TotalPctCPU.Monitor</val>
      <val>Microsoft.ApacheHTTPServer.ManagedServer.Unix.PctBusyWorkers.Monitor</val>
    </recm>
    <!-- Monitor context used to search for the MonitoringClass instance -->
    <recm key="monitorcontext">
      <val>Microsoft.Linux.Universal.OperatingSystem</val>
      <val>Microsoft.Linux.Universal.OperatingSystem</val>
    </recm>
    <!-- Target of the monitor -->
    <recm key="monitortarget">
      <val></val>
      <val></val>
    </recm>
    <!-- The default threshold for the monitor, to make an error condition hard to generate. -->
    <recm key="defaultmonitorthreshold">
      <val>80</val>
      <val>80</val>
    </recm>
    <!-- Threshold value to use in monitor override, to make an error condition easy to generate. -->
    <recm key="monitorthreshold">
      <val>10</val>
      <val>10</val>
    </recm>
    <!-- For those monitors where diagnostics exist, run and verify what was expected. 
    If the particular monitor does not have diagnostic, then leave this empty -->
    <recm key="diagnostics">
      <val></val>
      <val></val>
    </recm>
    <!-- Shell command to run to bring the monitor to a healthy state -->
    <recm key="recoverycmd">
      <val></val>
      <val></val>
    </recm>
  </var>

  <!-- Performance Health -->
  <var set="0" lvl="0" vid="725205" cid="ApacheVirtualHostPerformanceHealth" cls="Scx.Test.Apache.SDK.ApacheSDKTests.PerformanceHealth" dsc="This test will test ApacheVisualHost performance health 725205,725207" permutation="rows">
    <recm key="entityname">
      <val>ApacheVirtualHostTotalRequestsPerSecond</val>
      <val>ApacheVirtualHostWebErrorsPerMinuteforClient</val>
    </recm>
    <recm key="action">
      <val>ab -n 1000 http://localhost/</val>
      <val>ab -n 50000 -c 100 http://localhost/</val>
    </recm>
    <!-- Name of the monitor that will have its state changed due to the action taken -->
    <recm key="monitorname">
      <val>Microsoft.ApacheHTTPServer.VirtualHost.Unix.RequestsPerSecond.Monitor</val>
      <val>Microsoft.ApacheHTTPServer.VirtualHost.Unix.ErrorsPerMinute400.Monitorr</val>
    </recm>
    <!-- Monitor context used to search for the MonitoringClass instance -->
    <recm key="monitorcontext">
      <val>Microsoft.Linux.Universal.OperatingSystem</val>
      <val>Microsoft.Linux.Universal.OperatingSystem</val>
    </recm>
    <recm key="monitortarget">
      <val></val>
      <val></val>
    </recm>
    <recm key="defaultmonitorthreshold">
      <val>100</val>
      <val>80</val>
    </recm>
    <recm key="monitorthreshold">
      <val>10</val>
      <val>10</val>
    </recm>
    <recm key="diagnostics">
      <val></val>
      <val></val>
    </recm>
    <recm key="recoverycmd">
      <val></val>
      <val></val>
    </recm>
  </var>

  <grp cls="Scx.Test.Apache.SDK.ApacheSDKTests.GroupHelper">
    <rec key="hostname">a22p-ora6-01</rec>
    <rec key="superuser">root</rec>
    <rec key="superuserpwd">OpsMgr2007R2</rec>
    <rec key="nonsuperuser">scxuser</rec>
    <rec key="nonsuperuserpwd">scxuser</rec>
    <rec key="testingoverride">SCXTestOverrideUniversalMP</rec>
    <rec key="cleanupcommand"><![CDATA[rpm -e scx;rm -rf /etc/opt/microsoft/;rm -rf /opt/microsoft;rm -f /tmp/scx-1.0.*;rm -rf /var/opt/microsoft]]></rec>
    <rec key="platformtag">universalr.1.x86</rec>
    <rec key="apacheTag">universal.1.x86</rec>
    <rec key="architecture">x86</rec>
    <rec key="logicalprocessors">[0-9]{1}</rec>
    <rec key="isvirtualmachine">Virtual</rec>
    <rec key="physicalprocessors">\s{0}</rec>
    <rec key="targetcomputerclass">Microsoft.Linux.Computer</rec>
    <rec key="targetosclass">Microsoft.Linux.Universal.OperatingSystem</rec>
    <rec key="managementpack">Microsoft.Linux.UniversalR.1</rec>
    <rec key="deploytestapp">false</rec>
    <rec key="omserver"></rec>
    <rec key="omusername">scxsvc</rec>
    <rec key="omdomain">scx</rec>
    <rec key="ompassword">OpsMgr2007R2</rec>
    <rec key="defaultresourcepool">All Management Servers Resource Pool</rec>
    <rec key="localagents"><![CDATA[C:\Program Files\System Center 2012\Operations Manager\Server\AgentManagement\UnixAgents]]></rec>
    <rec key="remoteagents"><![CDATA[\\scxrel02\ScxCore\MAIN]]></rec>
    <!-- If this is true, ignore the remote agent drop folder, and use only local agents found in the pat given by 'localagents' -->
    <rec key="uselocalagents">true</rec>
    <!-- If this is true, Use "Install/Upgrade Apache CIM Module" task to install apache CIM module, it false, use command to install apache agent. -->
    <rec key="useTaskInstallApacheAgent">false</rec>
    <rec key="apacheAgentPath"><![CDATA[C:\Apache\cimprov]]></rec>
    <rec key="AgentPkgExt">rpm</rec>
    <rec key="DirectoryTag">CENTOS5.0_X86</rec>
    <rec key="latestonly">true</rec>
    <rec key="installonly">false</rec>
    <!--
      Agent maintenance account settings
      1. credentials type: 
         SSHKey = 0, BasicAuth = 1,;
     
      2. type of account: 
         priviledged = 0, unpriviledged = 1  
  
      3. sshkey credential type
         withPassphrase = 0, withoutPassphrase = 1
  
      4. elevated credential type
         None = 0, su = 1, sudo = 2 
     -->
    <rec key="UseAgentMaintenanceAccount">true</rec>
    <rec key="agentcredentialSettings">1,0,0,0</rec>
    <!--
    Performanace Data Collection test Setting
    -->
    <rec key="basetime">
    </rec>
    <rec key="startrange">-23:59:59</rec>
    <rec key="endrange">23:59:59</rec>
    <varref />
  </grp>
</varmap>
