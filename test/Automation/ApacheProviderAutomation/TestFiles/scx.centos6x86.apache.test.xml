<?xml version="1.0" encoding="utf-8"?>
<varmap xmlns="http://smxinfranet/schemas/mcf/2002/01/varmap"
        assembly="..\Apache.dll"
        dsc="Apache Automation Test"
        owner="v-litin" contact="v-litin">
  <snippet id="UniqueApacheServerInfo">
    <rec key="ApacheServer.ConfFile">/etc/httpd/conf/httpd\.conf</rec>
    <rec key="ApacheServer.Vendor">Apache Software Foundation</rec>
    <rec key="ApacheServer.ProductVersion">2\.2\.15</rec>
    <rec key="ApacheServer.ProcessName">httpd</rec>
    <rec key="ApacheServer.Collection">/etc/httpd</rec>
  </snippet>
  <snippet id="LinuxInfo">
    <rec key="Linux.Host">a22p-cent6-01.scx.com</rec>
  </snippet>
  <!-- Test Case information -->
  <var set="1" lvl="0" vid="724411" cid="Apache_HTTPDServer" cls="Scx.Test.Apache.Provider.VerifyEnumerate" dsc="Verify enumeration of Apache_HTTPDServer works for 1 Apache Server." act="true">
    <snipref id="UniqueApacheServerInfo" />
    <snipref id="LinuxInfo" />
    <rec key="p:InstanceID">%ApacheServer.ConfFile%</rec>
    <rec key="p:Caption">^$</rec>
    <rec key="p:Description">^$</rec>
    <rec key="p:ElementName">^$</rec>
    <rec key="p:ProductIdentifyingNumber">[0-9]</rec>
    <rec key="p:ProductName">%ApacheServer.ConfFile%</rec>
    <rec key="p:ProductVendor">%ApacheServer.Vendor%</rec>
    <rec key="p:ProductVersion">%ApacheServer.ProductVersion%</rec>
    <rec key="p:SystemID">%Linux.Host%</rec>
    <rec key="p:CollectionID">%ApacheServer.Collection%</rec>
    <rec key="p:Name">^$</rec>
    <rec key="p:ModuleVersion">[0-9].[0-9].[0-9]-[0-9]{3} \([0-9]{8}\)</rec>
    <rec key="p:ConfigurationFile">%ApacheServer.ConfFile%</rec>
    <rec key="p:InstalledModules">[A-Za-z0-9]+.c</rec>
    <rec key="p:InstalledModulesFormatted">[A-Za-z0-9]+.c</rec>
    <rec key="p:ProcessName">%ApacheServer.ProcessName%</rec>
    <rec key="p:ServiceName">%ApacheServer.ProcessName%</rec>
    <rec key="p:OperatingStatus">OK</rec>
    <rec key="p:OperatingStatusDetail">^$</rec>
  </var>

  <var set="1" lvl="0" vid="724640" cid="Apache_HTTPDServer" cls="Scx.Test.Apache.Provider.VerifyEnumerate" dsc="Verify the property OperatingStatus of Apache_HttpDServer will be rrror when apache server is not running." act="true">
    <snipref id="UniqueApacheServerInfo" />
    <snipref id="LinuxInfo" />
    <rec key="p:InstanceID">%ApacheServer.ConfFile%</rec>
    <rec key="p:ProductName">%ApacheServer.ConfFile%</rec>
    <rec key="p:ProductVendor">%ApacheServer.Vendor%</rec>
    <rec key="p:ProductVersion">%ApacheServer.ProductVersion%</rec>
    <rec key="p:ModuleVersion">[0-9].[0-9].[0-9]-[0-9]{3} \([0-9]{8}\)</rec>
    <rec key="p:ServiceName">%ApacheServer.ProcessName%</rec>
    <rec key="p:OperatingStatus">Error</rec>
    <rec key="p:OperatingStatusDetail">^$</rec>
    <rec key="StopApcheServer">true</rec>
  </var>

  <var set="1" lvl="1" vid="724642" cid="Apache_HTTPDServerStatistics" cls="Scx.Test.Apache.Provider.VerifyEnumerate" dsc="Verify enumeration of Apache_HTTPDServerStatistics works for 1 Apache Server." act="true">
    <snipref id="UniqueApacheServerInfo" />
    <rec key="p:InstanceID">%ApacheServer.ConfFile%</rec>
    <rec key="p:TotalPctCPU">0</rec>
    <rec key="p:IdleWorkers">0</rec>
    <rec key="p:BusyWorkers">0</rec>
    <rec key="p:PctBusyWorkers">0</rec>
    <rec key="p:ConfigurationFile">%ApacheServer.ConfFile%</rec>
  </var>

  <var set="1" lvl="0" vid="724661" cid="Apache_HTTPDServer" cls="Scx.Test.Apache.Provider.VerifyEnumerate" dsc="Verify enumeration of Apache_HTTPDServer works for 1 Apache Server." act="true">
    <snipref id="UniqueApacheServerInfo" />
    <snipref id="LinuxInfo" />
    <rec key="p:InstanceID">%ApacheServer.ConfFile%</rec>
    <rec key="p:Caption">^$</rec>
    <rec key="p:Description">^$</rec>
    <rec key="p:ElementName">^$</rec>
    <rec key="p:ProductIdentifyingNumber">[0-9]</rec>
    <rec key="p:ProductName">%ApacheServer.ConfFile%</rec>
    <rec key="p:ProductVendor">%ApacheServer.Vendor%</rec>
    <rec key="p:ProductVersion">%ApacheServer.ProductVersion%</rec>
    <rec key="p:SystemID">localhost</rec>
    <rec key="p:CollectionID">%ApacheServer.Collection%</rec>
    <rec key="p:Name">^$</rec>
    <rec key="p:ModuleVersion">[0-9].[0-9].[0-9]-[0-9]{3} \([0-9]{8}\)</rec>
    <rec key="p:ConfigurationFile">%ApacheServer.ConfFile%</rec>
    <rec key="p:InstalledModules">[A-Za-z0-9]+.c</rec>
    <rec key="p:InstalledModulesFormatted">[A-Za-z0-9]+.c</rec>
    <rec key="p:ProcessName">%ApacheServer.ProcessName%</rec>
    <rec key="p:ServiceName">%ApacheServer.ProcessName%</rec>
    <rec key="p:OperatingStatus">OK</rec>
    <rec key="p:OperatingStatusDetail">^$</rec>
    <rec key="RestartOmAgent">true</rec>
  </var>
  <!--<var set="1" lvl="1" vid="724648" cid="Apache_HTTPDVirtualHost" cls="Scx.Test.Apache.Provider.VerifyVirtualHost" dsc="Verify enumeration of Apache_HTTPDVirtualHost works for 1 HTTP virtual host and 1 HTTPS virtual host." act="true" permutation="rows">
    <snipref id="UniqueApacheServerInfo" />
    <snipref id="LinuxInfo" />
    <recm key="p:ServerName">
      <val>localhost</val>
      <val>a22p-cent6-01</val>
    </recm>
    <recm key="p:Ports">
      <val>0</val>
      <val>443</val>
    </recm>
  </var>-->
  <!-- Test Variables Definition -->
  <grp cls="Scx.Test.Apache.Provider.GroupHelper">
    <snipref id="LinuxInfo" />
    <rec key="hostname">%Linux.Host%</rec>
    <rec key="omserver">osst-w12r2-02</rec>
    <rec key="username">root</rec>
    <rec key="password">OpsMgr2007R2</rec>
    <rec key="nonsuperuser">scxuser</rec>
    <rec key="nonsuperuserpwd">scxuser</rec>
    <rec key="PlatformTag">universalr.1.x86</rec>
    <rec key="ApacheTag">universal.1.i686</rec>
    <rec key="InstallOMCmd">sh /tmp/{0} --install</rec>
    <rec key="UninstallOMCmd">/opt/microsoft/scx/bin/uninstall</rec>
    <rec key="RestartOMAgentCmd">scxadmin -restart</rec>
    <rec key="CleanupOMCmd"><![CDATA[/opt/microsoft/scx/bin/uninstall;rm -rf /etc/opt/microsoft/;rm -rf /opt/microsoft;rm -rf /tmp/scx*;rm -rf /var/opt/microsoft]]></rec>
    <rec key="AgentPkgExt">rpm</rec>
    <rec key="DirectoryTag">CentOS6.0_x86</rec>
    <rec key="installonly">false</rec>
    <rec key="knownIssueFormat">Known Issue: WI {0}: '{1}'</rec>
    <rec key="OMAgentLocation"><![CDATA[C:\Program Files\Microsoft System Center 2012 R2\Operations Manager\Server\AgentManagement\UnixAgents]]></rec>
    <!--cimprov-->
    <rec key="ApachesLocation"><![CDATA[C:\Apache\cimprov]]></rec>
    <rec key="installApacheCmd">sh /tmp/{0} --install</rec>
    <rec key="UninstallApacheCmd">sh /tmp/{0} --purge</rec>
    <rec key="CleanupApacheCmd"><![CDATA[sh /tmp/{0} --purge;rm -rf /etc/opt/microsoft/apache*;rm -rf /opt/microsoft/apache*;rm -rf /var/opt/microsoft/apache*;]]></rec>
    <!--check apache status-->
    <rec key="installApachePkg">yum install httpd</rec>
    <rec key="startApacheCmd">service httpd start</rec>
    <rec key="stopApacheCmd">service httpd stop</rec>
    <rec key="restartApacheCmd">service httpd restart</rec>
    <rec key="checkServiceCmd">service httpd status</rec>
    <!--<rec key="checkApacheInstalled">rpm -qa |grep httpd</rec>-->

    <!-- If this is true, ignore the remote agent drop folder, and use only local agents found in the pat given by 'OMAgentLocation' -->
    <rec key="useagentlocation">true</rec>
    <rec key="useapacheLocation">true</rec>
    <!-- Use only the latest agent: if an agent is not available in the latest build folder, exit with an error -->
    <rec key="latestonly">true</rec>
    <!-- Skip agent deployment: run WSMAN tests without attempting to install a new agent on the client machine, and don't uninstall the agent when testing is done-->
    <rec key="skipagentdeploy">false</rec>
    <varref />
  </grp>
</varmap>